function iTransactAchTransaction(){var e=JSON.stringify($("#check-review-form").serializeObject());console.log(e),$.ajax({type:"POST",url:"https://api.itransact.com/transactions",headers:{authorization:encodedUsername+":"+signiture,"content-type":"application/json"},processData:!0,data:e,success:function(e){console.log(e),console.log("Reaches here")}})}function creditCardTransaction(e){var n=JSON.stringify($("#card-review-form").serializeObject());$.ajax({type:"POST",url:"https://api.itransact.com/transactions",headers:{authorization:encodedUsername+":"+signiture,"content-type":"application/json"},processData:!0,data:n,success:function(n){console.log(n),e.submit()}})}function achCheckTransaction(){var e="<FundML> \n                <Version>1</Version> \n                <Request> \n                    <Code>LogOn</Code>\n                    <Online>Y</Online> \n                    <Broker> \n                        <Username>kevin.simms@mcggroup.com</Username>\n                        <Password>Kevins</Password>            \n                    </Broker> \n                </Request> \n              </FundML>",n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){4===this.readyState}),n.open("POST","https://www.redplanetsoftware.com/odyssey/fundml.aspx"),n.overrideMimeType("text/xml"),n.onload=function(){if(n.readyState===n.DONE&&200===n.status){var e=$("Session",n.response).text();xhrACHCheck(e)}},n.send(e)}function xhrACHCheck(e){var n=$('input[name="created_date"]').val(),t=$('input[name="amount"]').val(),a=$('input[name="check[name]"]').val(),s=$('input[name="check[account_num]"]').val(),r=$('input[name="check[routing_num]"]').val(),o=$('input[name="check[bank_name]"]').val(),i=$('input[name="address[line1]"]').val(),l=$('input[name="address[city]"]').val(),d=$('input[name="address[state]"]').val(),m=$('input[name="address[postal_code]"]').val(),c=$('input[name="metadata[email]"]').val(),u=$('input[name="metadata[phone]"]').val(),p=$('input[name="metadata[invoiceNumber]"]').val(),v="<FundML> \n                  <Version>1</Version> \n                  <Request> \n                      <Code>NewContract</Code>\n                      <Session>"+e+"</Session> \n                      <Client> \n                        <ABN/> \n                        <Name>"+a+"</Name> \n                        <RegisteredName>"+a+"</RegisteredName> \n                        <BrokerID>PracticeAR.001</BrokerID>\n                            <PostalAddress> \n                            <Address1></Address1> \n                            <Address2/> \n                            <Suburb></Suburb> \n                            <State></State> \n                            <Postcode></Postcode> \n                        </PostalAddress> \n                        <StreetAddress> \n                            <Address1>"+i+"</Address1> \n                            <Address2/> \n                            <Suburb>"+l+"</Suburb> \n                            <State>"+d+"</State> \n                            <Postcode>"+m+"</Postcode> \n                        </StreetAddress> \n                        <Telephone>"+u+"</Telephone> \n                        <Fax></Fax> \n                        <Email>"+c+"</Email> \n                        <FSRAType></FSRAType> \n                        <BankAccountNumber>"+s+"</BankAccountNumber> \n                        <BankBSB>"+r+"</BankBSB>\n                        <BankName>"+o+"</BankName> \n                        <BankBranch></BankBranch>\n                        <Contact> \n                            <Name>"+a+"</Name> \n                            <Telephone>"+u+"</Telephone> \n                            <Mobile>"+u+"</Mobile> \n                            <Fax></Fax> \n                            <Email>"+c+"</Email> \n                        </Contact> \n                    </Client> \n                     <InvoiceDetails>\n                        <InvoicesTotal>"+t+"</InvoicesTotal>\n                        <InvoiceNumbers>"+p+"</InvoiceNumbers>\n                    </InvoiceDetails>          \n                      <ContractDetails> \n                            <ContractReference/> \n                            <PaymentFrequency>M</PaymentFrequency>\n                            <ContractType>PP</ContractType> \n                       <ContractVersion/> \n                       <CreatedDate>"+n+"</CreatedDate> \n                       <TerminationDate/> \n                            <FirstInstalmentDate>"+n+"</FirstInstalmentDate> \n                            <FirstInstalmentAmount>"+t+"</FirstInstalmentAmount> \n                            <NumberOfInstalments>1</NumberOfInstalments> \n                            <RemainingInstalmentsAmount>0.00</RemainingInstalmentsAmount> \n                            <InterestCharges>0.00</InterestCharges> \n                            <TotalInvoices>"+t+"</TotalInvoices> \n                            <TotalDueByClient>"+t+"</TotalDueByClient> \n                      </ContractDetails>  \n                  </Request> \n              </FundML> ",h=new XMLHttpRequest;h.addEventListener("readystatechange",function(){4===this.readyState}),h.open("POST","https://www.redplanetsoftware.com/odyssey/fundml.aspx"),h.overrideMimeType("text/xml"),h.onload=function(){h.readyState===h.DONE&&200===h.status&&(console.log(v),console.log(h.response),window.alert(h.response))},h.send(v)}function xhrLogin(e){var n="<FundML> \n                      <Version>1</Version> \n                      <Request> \n                          <Code>LogOn</Code>\n                          <Online>Y</Online> \n                          <Broker> \n                              <Username>kevin.simms@mcggroup.com</Username>\n                              <Password>Kevins</Password>            \n                          </Broker> \n                      </Request> \n                  </FundML>",t=new XMLHttpRequest;t.addEventListener("readystatechange",function(){4===this.readyState}),t.open("POST","https://www.redplanetsoftware.com/odyssey/fundml.aspx"),t.overrideMimeType("text/xml"),t.onload=function(){if(t.readyState===t.DONE&&200===t.status){var n=$("Session",t.response).text();xhrQuoteCreation(n,e)}},t.send(n)}function xhrContractCreation(e){for(var n=$('input[name="created_date"]').val(),t=$('input[name="ein_number"]').val(),a=$('input[name="amount"]').val(),s=$('input[name="check[name]"]').val(),r=$('input[name="check[account_num]"]').val(),o=$('input[name="check[routing_num]"]').val(),i=$('input[name="check[bank_name]"]').val(),l=$('input[name="address[line1]"]').val(),d=$('input[name="address[city]"]').val(),m=$('input[name="address[state]"]').val(),c=$('input[name="address[postal_code]"]').val(),u=$('input[name="metadata[email]"]').val(),p=$('input[name="metadata[phone]"]').val(),v=$('input[name="metadata[invoiceNumber]"]').val(),h=$('input[name="monthlyInstallment"]').val(),y=$('input[name="adminFee"]').val(),A=$('input[name="initialTotalAmt"]').val(),C=$('input[name="initial_payment"]').val(),S=$('input[name="interst_charges"]').val(),b=$('input[name="totalRepaymentAmt"]').val();A.search(",")>=0;)A=(A+"").replace(",","");for(;C.search(",")>=0;)C=(C+"").replace(",","");for(;S.search(",")>=0;)S=(S+"").replace(",","");for(;b.search(",")>=0;)b=(b+"").replace(",","");var B="<FundML> \n                        <Version>1</Version> \n                        <Request> \n                            <Code>NewContract</Code>\n                            <Session>"+e+"</Session> \n                            <Client> \n                              <ABN>"+t+"</ABN> \n                              <Name>"+s+"</Name> \n                              <RegisteredName>"+s+"</RegisteredName> \n                              <BrokerID>PracticeAR.001</BrokerID>\n                                  <PostalAddress> \n                                  <Address1></Address1> \n                                  <Address2/> \n                                  <Suburb></Suburb> \n                                  <State></State> \n                                  <Postcode></Postcode> \n                              </PostalAddress> \n                              <StreetAddress> \n                                  <Address1>"+l+"</Address1> \n                                  <Address2/> \n                                  <Suburb>"+d+"</Suburb> \n                                  <State>"+m+"</State> \n                                  <Postcode>"+c+"</Postcode> \n                              </StreetAddress> \n                              <Telephone>"+p+"</Telephone> \n                              <Fax></Fax> \n                              <Email>"+u+"</Email> \n                              <FSRAType></FSRAType> \n                              <BankAccountNumber>"+r+"</BankAccountNumber> \n                              <BankBSB>"+o+"</BankBSB>\n                              <BankName>"+i+"</BankName> \n                              <BankBranch></BankBranch>\n                              <Contact> \n                                  <Name>"+s+"</Name> \n                                  <Telephone>"+p+"</Telephone> \n                                  <Mobile>"+p+"</Mobile> \n                                  <Fax></Fax> \n                                  <Email>"+u+"</Email> \n                              </Contact> \n                          </Client> \n                           <InvoiceDetails>\n                                   <InvoicesTotal>"+A+"</InvoicesTotal>\n                                   <InvoiceNumbers>"+v+"</InvoiceNumbers>\n                            </InvoiceDetails>            \n                            <ContractDetails> \n                                  <ContractReference/> \n                                  <PaymentFrequency>M</PaymentFrequency>\n                                  <ContractType>FEE</ContractType> \n                               <ContractVersion/> \n                               <CreatedDate>"+n+"</CreatedDate> \n                               <TerminationDate/> \n                                  <FirstInstalmentDate>"+n+"</FirstInstalmentDate> \n                                  <FirstInstalmentAmount>"+C+"</FirstInstalmentAmount> \n                                  <NumberOfInstalments>12</NumberOfInstalments> \n                                  <RemainingInstalmentsAmount>"+h+"</RemainingInstalmentsAmount> \n                                  <AdminFee>"+y+"</AdminFee> \n                                  <InterestCharges>"+S+"</InterestCharges> \n                                  <TotalInvoices>"+A+"</TotalInvoices> \n                                  <TotalDueByClient>"+b+"</TotalDueByClient> \n                            </ContractDetails> \n                        </Request> \n                    </FundML> ",f=new XMLHttpRequest;f.addEventListener("readystatechange",function(){4===this.readyState}),f.open("POST","https://www.redplanetsoftware.com/odyssey/fundml.aspx"),f.overrideMimeType("text/xml"),f.onload=function(){f.readyState===f.DONE&&200===f.status&&(console.log(f.response),window.alert(f.response))},f.send(B)}function xhrQuoteCreation(e,n){for(var t=$('input[name="created_date"]').val(),a=$('input[name="ein_number"]').val(),s=$('input[name="amount"]').val(),r=$('input[name="firstname"]').val()+" "+$('input[name="lastname"]').val(),o=$('input[name="address[line1]"]').val(),i=$('input[name="address[city]"]').val(),l=$('input[name="address[state]"]').val(),d=$('input[name="address[postal_code]"]').val(),m=$('input[name="email"]').val(),c=$('input[name="phone"]').val(),u=$('input[name="invoiceNumber"]').val(),p=$('input[name="monthlyInstallment"]').val(),v=$('input[name="adminFee"]').val(),h=$('input[name="initialTotalAmt"]').val();h.search(",")>=0;)h=(h+"").replace(",","");var y="<FundML> \n                        <Version>1</Version> \n                        <Request> \n                            <Code>NewQuote</Code>\n                            <Session>"+e+"</Session> \n                            <Installments>12</Installments>\n                            <Client> \n                              <ABN>"+a+"</ABN> \n                              <Name>"+r+"</Name> \n                              <RegisteredName>"+r+"</RegisteredName> \n                              <BrokerID>PracticeAR.001</BrokerID>\n                                  <PostalAddress> \n                                  <Address1></Address1> \n                                  <Address2/> \n                                  <Suburb></Suburb> \n                                  <State></State> \n                                  <Postcode></Postcode> \n                              </PostalAddress> \n                              <StreetAddress> \n                                  <Address1>"+o+"</Address1> \n                                  <Address2/> \n                                  <Suburb>"+i+"</Suburb> \n                                  <State>"+l+"</State> \n                                  <Postcode>"+d+"</Postcode> \n                              </StreetAddress> \n                              <Telephone>"+c+"</Telephone> \n                              <Fax></Fax> \n                              <Email>"+m+"</Email> \n                              <FSRAType></FSRAType> \n                              <BankAccountNumber>0000</BankAccountNumber> \n                              <BankBSB>000</BankBSB>\n                              <BankName>Default</BankName> \n                              <BankBranch>Default</BankBranch>\n                              <Contact> \n                                  <Name>"+r+"</Name> \n                                  <Telephone>"+c+"</Telephone> \n                                  <Mobile>"+c+"</Mobile> \n                                  <Fax></Fax> \n                                  <Email>"+m+"</Email> \n                              </Contact> \n                              <AccountManager> \n                                  <Name>Peter Williams</Name> \n                                  <BrokerID>PW</BrokerID> \n                                  <Telephone>9222 1345</Telephone> \n                                  <Mobile>0412 222 5643</Mobile> \n                                  <Fax>9222 4372</Fax> \n                                  <Email>peterw@redplanetsoftware.com</Email> \n                              </AccountManager> \n                          </Client> \n                           <InvoiceDetails>\n                                   <InvoicesTotal>"+h+"</InvoicesTotal>\n                                   <InvoiceNumbers>"+u+"</InvoiceNumbers>\n                            </InvoiceDetails>            \n                        </Request> \n                    </FundML> ",A=new XMLHttpRequest;A.addEventListener("readystatechange",function(){4===this.readyState}),A.open("POST","https://www.redplanetsoftware.com/odyssey/fundml.aspx"),A.overrideMimeType("text/xml"),A.onload=function(){if(A.readyState===A.DONE&&200===A.status){var e=$("PaperlessURL",A.response).text();console.log(A.response),$('input[name="quoteURL"]').val(e),n.submit()}},A.send(y)}function contractCreation(e){var n="<FundML> \n                        <Version>1</Version> \n                        <Request> \n                            <Code>NewContract</Code> \n                            <Online>Y</Online>\n                            <Session>"+e+"</Session> \n                            <Client> \n                                <ABN>10987654321</ABN> \n                                <Name>OpenCut Mining</Name> \n                                <RegisteredName>Emerald Mines Pty Ltd</RegisteredName> \n                                <BrokerID>OPENCUT</BrokerID> \n                                <PostalAddress> \n                                    <Address1>PO Box 321</Address1> \n                                    <Address2/> \n                                    <Suburb>Melbourne</Suburb> \n                                    <State>VIC</State> \n                                    <Postcode>3000</Postcode> \n                                </PostalAddress> \n                                <StreetAddress> \n                                    <Address1>23 Smith Street</Address1> \n                                    <Address2/> \n                                    <Suburb>Collingwood</Suburb> \n                                    <State>VIC</State> \n                                    <Postcode>3056</Postcode> \n                                </StreetAddress> \n                                <Telephone>(03) 9222 1234</Telephone> \n                                <Fax>(03) 9222 4321</Fax> \n                                <Email>enquiries@opencut.com.au</Email> \n                                <FSRAType></FSRAType> \n                                <BankAccountOnly>12345678</BankAccountOnly> \n                                <BankBSB>12345678</BankBSB>\n                                <BankName>Westpac Banking Corp</BankName> \n                                <BankBranch>George    Street</BankBranch> \n                                <Contact> \n                                    <Name>Stephen Adams</Name> \n                                    <Telephone>9222 1235</Telephone> \n                                    <Mobile>0412 222 5633</Mobile> \n                                    <Fax>9222 4322</Fax> \n                                    <Email>stephena@opencut.com.au</Email> \n                                </Contact> \n                            </Client> \n                             <InvoiceDetails>\n                                     <InvoicesTotal>1500</InvoicesTotal>\n                                     <InvoiceNumbers>123</InvoiceNumbers>\n                              </InvoiceDetails>          \n                              <ContractDetails> \n                                    <ContractReference>M00000456</ContractReference> \n                                    <PaymentFrequency>M</PaymentFrequency> \n                                   <ContractType>FEE</ContractType> \n                              <ContractVersion/> \n                              <CreatedDate>2017-10-04</CreatedDate> \n                              <TerminationDate/> \n                                    <FirstInstalmentDate>2017-10-29</FirstInstalmentDate> \n                                    <FirstInstalmentAmount>211.97</FirstInstalmentAmount> \n                                    <NumberOfInstalments>12</NumberOfInstalments> \n                                    <RemainingInstalmentsAmount>157.72</RemainingInstalmentsAmount> \n                                    <AdminFee>0.00</AdminFee> \n                                    <InterestCharges>0.00</InterestCharges> \n                                    <TotalInvoices>1892.64</TotalInvoices> \n                                    <TotalDueByClient>1892.64</TotalDueByClient>    \n                              </ContractDetails> \n                        </Request> \n                    </FundML> \n                    ";$.ajax({type:"POST",url:"https://www.redplanetsoftware.com/odyssey/fundml.aspx",contentType:"text/plain",data:n,success:function(e){console.log(e)}})}var encodedUsername="bW9udGdvbWVyeV9jb3NjaWFfc3BvdHVubw==",signiture=$('input[name="paymentSigniture"]').val();jQuery.fn.serializeObject=function(){var e=this,n={},t={},a={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,n,t){return e[n]=t,e},this.push_counter=function(e){return void 0===t[e]&&(t[e]=0),t[e]++},$.each($(this).serializeArray(),function(){if(a.validate.test(this.name)){for(var t,s=this.name.match(a.key),r=this.value,o=this.name;void 0!==(t=s.pop());)o=o.replace(new RegExp("\\["+t+"\\]$"),""),t.match(a.push)?r=e.build([],e.push_counter(o),r):t.match(a.fixed)?r=e.build([],t,r):t.match(a.named)&&(r=e.build({},t,r));n=$.extend(!0,n,r)}}),delete n.submitReviewForm,delete n.paymentToken,delete n.paymentSigniture,delete n.siteUrl,n},$("#monthly-portal-quote-form").validate({errorClass:"error",validClass:"success",errorElement:"span",onkeyup:!1,rules:{},submitHandler:function(e,n){n.preventDefault(),xhrLogin(e)}}),$("#monthly-payment-form").validate({errorClass:"error",validClass:"success",errorElement:"span",onkeyup:!1,rules:{"card[cvc]":{cardCVC:!0,required:!0},"card[number]":{cardNumber:!0,required:!0},"card[expiry-year]":"cardExpiry"},submitHandler:function(e,n){n.preventDefault(),xhrLogin(e)}}),$("#review-form").validate({errorClass:"error",validClass:"success",errorElement:"span",onkeyup:!1,rules:{},submitHandler:function(e,n){n.preventDefault(),xhrLogin()}}),$("#card-review-form").validate({errorClass:"error",validClass:"success",errorElement:"span",onkeyup:!1,rules:{},submitHandler:function(e,n){n.preventDefault(),creditCardTransaction(e)}}),$("#check-review-form").validate({errorClass:"error",validClass:"success",errorElement:"span",onkeyup:!1,rules:{},submitHandler:function(e,n){n.preventDefault(),iTransactAchTransaction()}});